<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Finance Game — Invest & Borrow</title>

    <!-- Bootstrap CSS (CDN) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  <body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="#">Finance Game</a>
        <span class="navbar-text text-white">Start with $100 — invest wisely or take долг!</span>
      </div>
    </nav>

    <main class="container my-4">
      <div class="row">
        <div class="col-lg-8">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">Game story</h5>
              <p class="card-text">
                You start with <strong>$100</strong>. Each turn (month) you choose actions:
                invest in assets, take credit (долг), repay debt, or hold cash.
                After <span id="total-rounds-label">6</span> rounds we calculate your net worth.
              </p>
              <div class="d-flex gap-2">
                <button id="start-btn" class="btn btn-success">Start New Game</button>
                <button id="next-btn" class="btn btn-primary" disabled>Next Turn</button>
                <button id="reset-btn" class="btn btn-outline-secondary" disabled>Reset</button>
              </div>
            </div>
          </div>

          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">Turn actions</h5>
              <p>Choose one of the investments or manage credit. Each investment has different risk/return.</p>

              <div class="row g-2">
                <div class="col-md-6">
                  <div class="card asset-card">
                    <div class="card-body">
                      <h6>Stocks (volatile)</h6>
                      <p class="small">Return: -40% ... +60% (chance of large swings)</p>
                      <div class="input-group mb-2">
                        <span class="input-group-text">$</span>
                        <input id="stocks-input" type="number" class="form-control" min="0" placeholder="Amount to invest">
                        <button data-asset="stocks" class="btn btn-outline-primary invest-btn">Invest</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card asset-card">
                    <div class="card-body">
                      <h6>Bonds (stable)</h6>
                      <p class="small">Return: +2% ... +6%</p>
                      <div class="input-group mb-2">
                        <span class="input-group-text">$</span>
                        <input id="bonds-input" type="number" class="form-control" min="0" placeholder="Amount to invest">
                        <button data-asset="bonds" class="btn btn-outline-primary invest-btn">Invest</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card asset-card">
                    <div class="card-body">
                      <h6>Crypto (high risk)</h6>
                      <p class="small">Return: -80% ... +200% (very risky)</p>
                      <div class="input-group mb-2">
                        <span class="input-group-text">$</span>
                        <input id="crypto-input" type="number" class="form-control" min="0" placeholder="Amount to invest">
                        <button data-asset="crypto" class="btn btn-outline-primary invest-btn">Invest</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="card asset-card">
                    <div class="card-body">
                      <h6>Startup (lottery)</h6>
                      <p class="small">Return: 0% (fail) or +500% (big win). Low chance to win.</p>
                      <div class="input-group mb-2">
                        <span class="input-group-text">$</span>
                        <input id="startup-input" type="number" class="form-control" min="0" placeholder="Amount to invest">
                        <button data-asset="startup" class="btn btn-outline-primary invest-btn">Invest</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="d-flex gap-2">
                    <input id="credit-amount" type="number" min="1" placeholder="Amount to borrow (долг)" class="form-control w-auto">
                    <button id="take-credit" class="btn btn-warning">Take Credit (долг)</button>

                    <input id="repay-amount" type="number" min="1" placeholder="Repay debt $" class="form-control w-auto">
                    <button id="repay-btn" class="btn btn-success">Repay Debt</button>
                  </div>
                  <div class="form-text mt-2">
                    Credit has interest 8% per turn on outstanding debt. You can borrow multiple times.
                  </div>
                </div>
              </div>

            </div>
          </div>

          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">Game log</h5>
              <div id="log" class="small game-log" style="height:220px; overflow:auto; background:#f8f9fa; padding:10px; border-radius:6px;"></div>
            </div>
          </div>

        </div>

        <div class="col-lg-4">
          <div class="card mb-3">
            <div class="card-body">
              <h5 class="card-title">Portfolio</h5>
              <ul class="list-group list-group-flush mb-2">
                <li class="list-group-item">Cash: $<span id="cash">0.00</span></li>
                <li class="list-group-item">Debt (долг): $<span id="debt">0.00</span></li>
                <li class="list-group-item">Round: <span id="round">0</span> / <span id="total-rounds">6</span></li>
              </ul>

              <h6>Assets</h6>
              <ul class="list-group list-group-flush mb-2" id="assets-list">
                <li class="list-group-item">Stocks: $<span id="stocks">0.00</span></li>
                <li class="list-group-item">Bonds: $<span id="bonds">0.00</span></li>
                <li class="list-group-item">Crypto: $<span id="crypto">0.00</span></li>
                <li class="list-group-item">Startup: $<span id="startup">0.00</span></li>
              </ul>

              <div class="d-grid">
                <button id="end-game-btn" class="btn btn-danger" disabled>End Game & Evaluate</button>
              </div>

            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <h5>Game result</h5>
              <div id="result" class="fw-bold"></div>
              <small class="text-muted">Net worth = cash + assets - debt</small>
            </div>
          </div>

        </div>
      </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
  </body>
</html>
